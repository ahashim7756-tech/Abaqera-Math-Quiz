<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ø¹Ø¨Ø§Ù‚Ø±Ø© | Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</title>
    <style>
        :root { --primary: #1a237e; --secondary: #3498db; --success: #27ae60; --danger: #e74c3c; --gold: #c5a059; --dark: #2c3e50; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #f4f7f6; margin: 0; direction: rtl; color: #333; }
        .container { max-width: 800px; margin: auto; padding: 20px; }
        .card { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; margin-bottom: 20px; border-top: 5px solid var(--primary); }
        .btn { border: none; padding: 15px; border-radius: 12px; cursor: pointer; font-size: 1rem; font-weight: bold; transition: 0.3s; width: 100%; margin: 8px 0; display: block; text-decoration: none; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-gold { background: var(--gold); color: white; }
        .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
        .hidden { display: none; }
        .grid-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-height: 85%; background: white; z-index: 1000; padding: 25px; border-radius: 20px; box-shadow: 0 0 100px rgba(0,0,0,0.5); overflow-y: auto; text-align: right; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 999; }
        .certificate { border: 15px double var(--gold); background: #fffcf5; padding: 30px; position: relative; }
        .law-item { background: #f8f9fa; padding: 10px; border-right: 4px solid var(--gold); margin-bottom: 10px; text-align: right; }
        #feedback { margin-top: 15px; padding: 15px; border-radius: 10px; text-align: right; font-weight: bold; }
        @media (max-width: 600px) { .grid-menu { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="container">
    <div id="screen-start" class="card">
        <h1 style="color:var(--primary)">ğŸ“ Ù…Ù†ØµØ© Ø§Ù„Ø¹Ø¨Ø§Ù‚Ø±Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</h1>
        <p>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø© 2026</p>
        <input type="text" id="student-name" style="width:90%; padding:15px; border-radius:10px; border:2px solid #ddd; text-align:center; font-size:1.1rem;" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ">
        <button class="btn btn-primary" onclick="loadAndStart()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ©</button>
        <p id="load-status" style="color: var(--danger); font-size: 0.9rem; margin-top:10px;"></p>
    </div>

    <div id="screen-menu" class="card hidden">
        <h2 style="color:var(--dark)">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
        <div class="grid-menu">
            <button class="btn btn-primary" onclick="startQuiz(true)">ğŸ”“ ØªØ¬Ø±Ø¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ© (5 Ø£Ø³Ø¦Ù„Ø©)</button>
            <button class="btn btn-gold" onclick="startQuiz(false)">ğŸ† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„ (50 Ø³Ø¤Ø§Ù„)</button>
            <button class="btn btn-outline" onclick="showModal('laws-modal')">ğŸ“œ Ø¨Ù†Ùƒ Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</button>
            <button class="btn btn-outline" onclick="showModal('tricks-modal')">ğŸ’¡ ØªØ±ÙŠÙƒØ§Øª Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</button>
        </div>
    </div>

    <div id="screen-quiz" class="card hidden">
        <div id="quiz-area">
            <h3 id="q-text" style="line-height:1.6;"></h3>
            <div id="options-area"></div>
        </div>
        <div id="feedback" style="display:none;"></div>
        <button id="next-btn" class="btn btn-primary hidden" onclick="nextQuestion()">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â¬…ï¸</button>
    </div>

    <div id="screen-result" class="card hidden">
        <div class="certificate">
            <h1 style="color:var(--gold)">Ø´Ù‡Ø§Ø¯Ø© ØªÙÙˆÙ‚ ÙˆØ¥Ù†Ø¬Ø§Ø²</h1>
            <p>Ù†Ù‚Ø± Ù†Ø­Ù† Ø¥Ø¯Ø§Ø±Ø© Ù…Ù†ØµØ© Ø§Ù„Ø¹Ø¨Ø§Ù‚Ø±Ø© Ø¨Ø£Ù† Ø§Ù„Ø·Ø§Ù„Ø¨/Ø©:</p>
            <h2 id="cert-name" style="color:var(--primary)"></h2>
            <p>Ù‚Ø¯ Ø§Ø¬ØªØ§Ø² Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ø´Ø§Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­ Ø¨Ù…Ø¹Ø¯Ù„:</p>
            <h1 id="cert-score" style="color:var(--success); font-size:3rem; margin:10px 0;"></h1>
            <p id="cert-date" style="color:#666;"></p>
        </div>
        <button class="btn btn-primary" onclick="location.reload()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </div>
</div>

<div id="overlay" class="overlay" onclick="hideModals()"></div>

<div id="laws-modal" class="modal">
    <h2 style="color:var(--primary); border-bottom: 2px solid var(--gold); padding-bottom:10px;">ğŸ“œ Ø£Ù‡Ù… Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ù…Ù†Ù‡Ø¬</h2>
    <div class="law-item"><b>Ø§Ù„Ø¬Ø¨Ø±:</b> Ù„(Ø£ âˆª Ø¨) = Ù„(Ø£) + Ù„(Ø¨) - Ù„(Ø£ âˆ© Ø¨)</div>
    <div class="law-item"><b>Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¹Ø§Ù…:</b> Ø³ = [-Ø¨ Â± âˆš(Ø¨Â² - 4Ø£Ø¬)] / 2Ø£</div>
    <div class="law-item"><b>Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©:</b> Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© = Ï€ Ù†Ù‚Â² | Ù…Ø­ÙŠØ· Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© = 2 Ï€ Ù†Ù‚</div>
    <div class="law-item"><b>Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠ:</b> ÙƒÙ„ Ø²Ø§ÙˆÙŠØªÙŠÙ† Ù…ØªÙ‚Ø§Ø¨Ù„ØªÙŠÙ† Ù…ØªÙƒØ§Ù…Ù„ØªØ§Ù† (180 Ø¯Ø±Ø¬Ø©).</div>
    <button class="btn btn-primary" onclick="hideModals()">Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<div id="tricks-modal" class="modal">
    <h2 style="color:var(--danger); border-bottom: 2px solid var(--gold); padding-bottom:10px;">ğŸ’¡ ØªØ±ÙŠÙƒØ§Øª Ù„Ø§ ÙŠØ®Ø±Ø¬ Ø¹Ù†Ù‡Ø§ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</h2>
    <div class="law-item">âš ï¸ <b>Ø£ØµÙØ§Ø± Ø§Ù„Ø¯Ø§Ù„Ø©:</b> Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¯(Ø³)=Ø³Â²+9ØŒ ÙØ§Ù„Ø£ØµÙØ§Ø± Ù‡ÙŠ ÙØ§ÙŠ (âˆ…).</div>
    <div class="law-item">âš ï¸ <b>Ø§Ù„Ù…Ù…Ø§Ø³:</b> Ø¯Ø§Ø¦Ù…Ø§Ù‹ ÙŠÙƒÙˆÙ† Ø¹Ù…ÙˆØ¯ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± Ø¹Ù†Ø¯ Ù†Ù‚Ø·Ø© Ø§Ù„ØªÙ…Ø§Ø³.</div>
    <div class="law-item">âš ï¸ <b>Ø§Ù„Ù…Ø­ÙŠØ·ÙŠØ© ÙˆØ§Ù„Ù…Ø±ÙƒØ²ÙŠØ©:</b> Ø§Ù„Ù…Ø­ÙŠØ·ÙŠØ© Ù†ØµÙ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ© Ø¥Ø°Ø§ Ø§Ø´ØªØ±ÙƒØªØ§ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù‚ÙˆØ³.</div>
    <div class="law-item">âš ï¸ <b>Ø§Ù„Ù…Ø¬Ø§Ù„:</b> Ù‡Ùˆ Ø­ - {Ø£ØµÙØ§Ø± Ø§Ù„Ù…Ù‚Ø§Ù…}ØŒ Ø§Ù†ØªØ¨Ù‡ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„ÙØ±Ù‚ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©.</div>
    <button class="btn btn-primary" onclick="hideModals()">ÙÙ‡Ù…Øª</button>
</div>

<script>
    let allQuestions = [];
    let currentQuestions = [];
    let currentIdx = 0;
    let score = 0;

    async function loadAndStart() {
        const name = document.getElementById('student-name').value;
        const status = document.getElementById('load-status');
        
        if(name.length < 3) {
            alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ø£ÙˆÙ„Ø§Ù‹");
            return;
        }

        try {
            status.innerText = "Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©... â³";
            const response = await fetch('questions.json');
            if (!response.ok) throw new Error();
            allQuestions = await response.json();
            switchScreen('screen-menu');
        } catch (error) {
            status.innerText = "âŒ Ø®Ø·Ø£: Ù…Ù„Ù questions.json ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ ØªØ§Ù„Ù. ØªØ£ÙƒØ¯ Ù…Ù† Ø±ÙØ¹Ù‡ Ø¨Ø¬Ø§Ù†Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù.";
        }
    }

    function switchScreen(id) {
        document.querySelectorAll('.container > div').forEach(d => d.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }

    function startQuiz(isFree) {
        currentQuestions = isFree ? allQuestions.slice(0, 5) : allQuestions;
        currentIdx = 0;
        score = 0;
        switchScreen('screen-quiz');
        showQuestion();
    }

    function showQuestion() {
        const q = currentQuestions[currentIdx];
        document.getElementById('q-text').innerText = `Ø³Ø¤Ø§Ù„ (${currentIdx + 1}/${currentQuestions.length}): ${q.q}`;
        
        const area = document.getElementById('options-area');
        area.innerHTML = "";
        
        q.opts.forEach((o, i) => {
            const btn = document.createElement('button');
            btn.className = "btn btn-outline";
            btn.innerText = o;
            btn.onclick = () => check(i, btn);
            area.appendChild(btn);
        });

        document.getElementById('feedback').style.display = "none";
        document.getElementById('next-btn').classList.add('hidden');
    }

    function check(userIdx, btnElement) {
        const q = currentQuestions[currentIdx];
        const f = document.getElementById('feedback');
        
        document.querySelectorAll('#options-area .btn').forEach(b => b.disabled = true);
        f.style.display = "block";

        if(userIdx === q.ans) {
            score++;
            f.style.background = "#d4edda";
            f.style.color = "#155724";
            f.innerHTML = "âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! " + (q.hint || "");
            btnElement.style.background = "var(--success)";
            btnElement.style.color = "white";
        } else {
            f.style.background = "#f8d7da";
            f.style.color = "#721c24";
            f.innerHTML = "âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©. " + (q.hint || "");
            btnElement.style.background = "var(--danger)";
            btnElement.style.color = "white";
        }
        document.getElementById('next-btn').classList.remove('hidden');
    }

    function nextQuestion() {
        currentIdx++;
        if(currentIdx < currentQuestions.length) {
            showQuestion();
        } else {
            endQuiz();
        }
    }

    function endQuiz() {
        switchScreen('screen-result');
        document.getElementById('cert-name').innerText = document.getElementById('student-name').value;
        document.getElementById('cert-score').innerText = `${score} Ù…Ù† ${currentQuestions.length}`;
        document.getElementById('cert-date').innerText = "ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±: " + new Date().toLocaleDateString('ar-EG');
    }

    function showModal(id) {
        document.getElementById(id).style.display = 'block';
        document.getElementById('overlay').style.display = 'block';
    }

    function hideModals() {
        document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
        document.getElementById('overlay').style.display = 'none';
    }
</script>
</body>
</html>
