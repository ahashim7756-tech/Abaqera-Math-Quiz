<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„ØªÙ…ÙŠØ² Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© - Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</title>
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¬Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ø³ØªÙˆØ­Ø§Ø© Ù…Ù† Ù‚Ø§Ù„Ø¨Ùƒ */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; color: #333; line-height: 1.6;
        }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        header {
            background: rgba(255, 255, 255, 0.95); padding: 20px; border-radius: 15px;
            margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center;
        }
        header h1 { color: #764ba2; font-size: 2.2em; margin-bottom: 5px; }
        
        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ù‚Ø§Ø¦Ù…Ø© */
        .nav-buttons { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin: 20px 0; }
        .btn {
            padding: 12px 25px; border: none; border-radius: 50px; font-size: 1em;
            cursor: pointer; transition: 0.3s; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .btn-primary { background: linear-gradient(45deg, #667eea, #764ba2); color: white; }
        .btn-success { background: linear-gradient(45deg, #11998e, #38ef7d); color: white; }
        .btn-warning { background: linear-gradient(45deg, #f093fb, #f5576c); color: white; }
        .btn-info { background: linear-gradient(45deg, #4facfe, #00f2fe); color: white; }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0,0,0,0.3); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
        .quiz-container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .question-box { background: #f8f9fa; padding: 20px; border-radius: 15px; border-right: 5px solid #764ba2; margin-bottom: 20px; }
        .option {
            padding: 15px; background: white; border: 2px solid #ddd; border-radius: 10px;
            cursor: pointer; transition: 0.3s; margin-bottom: 10px; display: block; width: 100%; text-align: right; font-size: 1.1em;
        }
        .option:hover { background: #f0f4ff; border-color: #667eea; }
        .option.correct { background: #d4edda !important; border-color: #28a745 !important; color: #155724; }
        .option.wrong { background: #f8d7da !important; border-color: #dc3545 !important; color: #721c24; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */
        .progress-container { width: 100%; height: 12px; background: #e0e0e0; border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
        .progress-bar { height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); width: 0%; transition: 0.5s; }

        /* Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© */
        .certificate {
            display: none; background: #fffdf5; border: 10px double #d4af37; padding: 40px;
            text-align: center; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .student-name { font-size: 2.2em; color: #764ba2; font-weight: bold; border-bottom: 2px solid #d4af37; margin: 15px 0; display: inline-block; }

        /* Ø§Ù„Ù†ÙˆØ§ÙØ° */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); }
        .modal-content { background: white; margin: 5% auto; padding: 30px; border-radius: 20px; width: 90%; max-width: 600px; text-align: right; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <header id="main-header">
        <h1>ğŸ“ Ù…Ù†ØµØ© Ø§Ù„ØªÙ…ÙŠØ² Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</h1>
        <p>Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ø´Ø§Ù…Ù„Ø© - Ù†Ø³Ø®Ø© 2026</p>
    </header>

    <div id="start-screen" class="quiz-container">
        <h2 style="text-align:center; color:#764ba2; margin-bottom:20px;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ø¨Ø·Ù„</h2>
        <input type="text" id="studentNameInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ù‡Ù†Ø§..." 
               style="width:100%; padding:15px; border-radius:10px; border:2px solid #ddd; font-size:1.2rem; text-align:center; margin-bottom:20px;">
        <button class="btn btn-primary" style="width:100%" onclick="initApp()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ©</button>
    </div>

    <div id="menu-screen" class="hidden">
        <div class="nav-buttons">
            <button class="btn btn-primary" onclick="startQuiz(5)">ğŸš€ ØªØ¬Ø±Ø¨Ø© (5 Ø£Ø³Ø¦Ù„Ø©)</button>
            <button class="btn btn-success" onclick="startQuiz(50)">ğŸ“ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„ (50 Ø³Ø¤Ø§Ù„)</button>
            <button class="btn btn-warning" onclick="openModal('rulesModal')">ğŸ“š Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</button>
            <button class="btn btn-info" onclick="openModal('tricksModal')">ğŸ’¡ Ø§Ù„ØªØ±ÙŠÙƒØ§Øª</button>
        </div>
    </div>

    <div id="quiz-screen" class="quiz-container hidden">
        <div class="progress-container"><div id="progressBar" class="progress-bar"></div></div>
        <div id="question-area">
            <div class="question-box"><h3 id="q-text"></h3></div>
            <div id="options-area"></div>
        </div>
        <div id="feedback-area" style="margin-top:15px; padding:15px; border-radius:10px; display:none; font-weight:bold;"></div>
        <button id="next-btn" class="btn btn-primary hidden" style="margin-top:20px; width:100%" onclick="nextQuestion()">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â¬…ï¸</button>
    </div>

    <div id="certificate-screen" class="certificate">
        <h2 style="color:#d4af37">Ø´Ù‡Ø§Ø¯Ø© Ø¥ØªÙ…Ø§Ù… ÙˆØªÙÙˆÙ‚</h2>
        <p>Ù†Ø´Ù‡Ø¯ Ø¨Ø£Ù† Ø§Ù„Ø·Ø§Ù„Ø¨:</p>
        <div id="certName" class="student-name"></div>
        <p>Ù‚Ø¯ Ø§Ø¬ØªØ§Ø² Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø¨Ù†Ø³Ø¨Ø©:</p>
        <div id="certScore" style="font-size:3rem; color:#d4af37; font-weight:bold;"></div>
        <p id="certDate" style="color:#666; margin-top:20px;"></p>
        <div class="nav-buttons">
            <button class="btn btn-success" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©</button>
            <button class="btn btn-primary" onclick="location.reload()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        </div>
    </div>
</div>

<div id="rulesModal" class="modal">
    <div class="modal-content">
        <h2 style="border-bottom:2px solid #764ba2; padding-bottom:10px">ğŸ“š Ø¨Ù†Ùƒ Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</h2>
        <p>â€¢ <b>Ø§Ù„Ø¬Ø¨Ø±:</b> Ù„(Ø£ âˆª Ø¨) = Ù„(Ø£) + Ù„(Ø¨) - Ù„(Ø£ âˆ© Ø¨)</p>
        <p>â€¢ <b>Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©:</b> Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø­ÙŠØ·ÙŠØ© = Â½ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©.</p>
        <p>â€¢ <b>Ø§Ù„Ù…Ø¬Ø§Ù„:</b> Ø­ - {Ø£ØµÙ€ÙØ§Ø± Ø§Ù„Ù…Ù€Ù‚Ù€Ø§Ù…}.</p>
        <button class="btn btn-primary" style="margin-top:20px" onclick="closeModal('rulesModal')">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<div id="tricksModal" class="modal">
    <div class="modal-content">
        <h2 style="border-bottom:2px solid #f5576c; padding-bottom:10px">ğŸ’¡ ØªØ±ÙŠÙƒØ§Øª Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</h2>
        <p>â€¢ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¯(Ø³)=7 ÙØ¥Ù† Ø£ØµÙØ§Ø±Ù‡Ø§ Ù‡ÙŠ âˆ….</p>
        <p>â€¢ Ø§Ù„Ù…Ù…Ø§Ø³ ÙŠÙƒÙˆÙ† Ø¹Ù…ÙˆØ¯ÙŠØ§Ù‹ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¹Ù„Ù‰ Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø±.</p>
        <p>â€¢ Ø§Ù„Ù‚ÙˆØ³ Ø§Ù„Ø°ÙŠ ÙŠÙ…Ø«Ù„ Ø«Ù„Ø« Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ù‚ÙŠØ§Ø³Ù‡ 120 Ø¯Ø±Ø¬Ø©.</p>
        <button class="btn btn-primary" style="margin-top:20px" onclick="closeModal('tricksModal')">ÙÙ‡Ù…Øª</button>
    </div>
</div>

<script>
    let allQuestions = [];
    let currentQuestions = [];
    let currentIdx = 0;
    let score = 0;
    let studentName = "";

    // Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ
    async function initApp() {
        const nameInput = document.getElementById('studentNameInput').value;
        if(nameInput.length < 3) return alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ");
        studentName = nameInput;

        try {
            const res = await fetch('questions.json');
            allQuestions = await res.json();
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('menu-screen').classList.remove('hidden');
        } catch(e) {
            alert("Ø®Ø·Ø£: ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù questions.json Ø¨Ø¬Ø§Ù†Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù");
        }
    }

    function startQuiz(count) {
        currentQuestions = allQuestions.slice(0, count);
        currentIdx = 0; score = 0;
        document.getElementById('menu-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        const q = currentQuestions[currentIdx];
        document.getElementById('q-text').innerText = `Ø³ (${currentIdx+1}/${currentQuestions.length}): ${q.q}`;
        const area = document.getElementById('options-area');
        area.innerHTML = "";
        
        q.opts.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = "option";
            btn.innerText = opt;
            btn.onclick = () => checkAns(i, btn);
            area.appendChild(btn);
        });

        document.getElementById('feedback-area').style.display = "none";
        document.getElementById('next-btn').classList.add('hidden');
        updateProgress();
    }

    function checkAns(idx, btn) {
        const q = currentQuestions[currentIdx];
        const feedback = document.getElementById('feedback-area');
        const allBtns = document.querySelectorAll('.option');
        
        allBtns.forEach(b => b.style.pointerEvents = "none");
        feedback.style.display = "block";

        if(idx === q.ans) {
            score++;
            btn.classList.add('correct');
            feedback.innerHTML = "âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! " + q.hint;
            feedback.style.background = "#d4edda";
        } else {
            btn.classList.add('wrong');
            allBtns[q.ans].classList.add('correct');
            feedback.innerHTML = "âŒ Ø®Ø·Ø£. " + q.hint;
            feedback.style.background = "#f8d7da";
        }
        document.getElementById('next-btn').classList.remove('hidden');
    }

    function nextQuestion() {
        currentIdx++;
        if(currentIdx < currentQuestions.length) showQuestion();
        else showResult();
    }

    function showResult() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('main-header').classList.add('hidden');
        const cert = document.getElementById('certificate-screen');
        cert.style.display = "block";
        
        document.getElementById('certName').innerText = studentName;
        const finalScore = Math.round((score / currentQuestions.length) * 100);
        document.getElementById('certScore').innerText = finalScore + "%";
        document.getElementById('certDate').innerText = "ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: " + new Date().toLocaleDateString('ar-EG');
    }

    function updateProgress() {
        const p = (currentIdx / currentQuestions.length) * 100;
        document.getElementById('progressBar').style.width = p + "%";
    }

    function openModal(id) { document.getElementById(id).style.display = 'block'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }
</script>
</body>
</html>
