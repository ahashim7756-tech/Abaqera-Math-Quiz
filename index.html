<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุตุฉ ุงูุนุจุงูุฑุฉ ุงูุดุงููุฉ | ุฑูุงุถูุงุช 3ุน - ุชุฑู 2</title>
    <style>
        :root { --primary: #1a237e; --secondary: #3498db; --success: #27ae60; --danger: #e74c3c; --gold: #c5a059; --dark: #2c3e50; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; direction: rtl; }
        .container { max-width: 900px; margin: auto; padding: 20px; }
        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); margin-bottom: 20px; text-align: center; border-top: 6px solid var(--primary); }
        .btn { padding: 15px; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold; transition: 0.3s; width: 100%; margin: 5px 0; border: none; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-gold { background: var(--gold); color: white; }
        .btn-back { background: #607d8b; color: white; width: auto; padding: 8px 20px; font-size: 0.9rem; }
        .hidden { display: none; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .lesson-box { text-align: right; background: #fdfdfd; border-right: 4px solid var(--secondary); padding: 15px; margin: 10px 0; }
        .law-highlight { color: var(--danger); font-weight: bold; background: #fff5f5; padding: 2px 5px; }
        .certificate { border: 10px double var(--gold); padding: 30px; background: #fffcf5; }
        @media (max-width: 600px) { .grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="container">
    <div id="screen-home" class="card">
        <h1 style="color:var(--primary)">๐ ููุตุฉ ุงูุนุจุงูุฑุฉ ุงูุงุญุชุฑุงููุฉ</h1>
        <p>ุงููููุฌ ุงููุงูู ููุฑูุงุถูุงุช - ุงูุตู ุงูุซุงูุซ ุงูุฅุนุฏุงุฏู</p>
        <input type="text" id="user-name" style="padding:15px; width:80%; border:2px solid #ddd; border-radius:10px; text-align:center;" placeholder="ุฃุฏุฎู ุงุณูู ุงูุซูุงุซู">
        <button class="btn btn-primary" onclick="goTo('screen-main-menu')" style="margin-top:20px;">ุฏุฎูู ุงูููุตุฉ</button>
    </div>

    <div id="screen-main-menu" class="card hidden">
        <button class="btn btn-back" onclick="goTo('screen-home')">โฌ๏ธ ุฎุฑูุฌ</button>
        <h2>ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</h2>
        <div class="grid">
            <button class="btn btn-primary" onclick="goTo('screen-units')">๐ ุดุฑุญ ุงูุฏุฑูุณ ูุงูููุงููู</button>
            <button class="btn btn-gold" onclick="goTo('screen-exam-menu')">๐ ุจูู ุงูุงุฎุชุจุงุฑุงุช ุงูุดุงูู</button>
        </div>
    </div>

    <div id="screen-units" class="card hidden">
        <button class="btn btn-back" onclick="goTo('screen-main-menu')">โฌ๏ธ ุนูุฏุฉ</button>
        <h2>ุงุฎุชุฑ ุงููุญุฏุฉ ููุดุฑุญ</h2>
        <button class="btn btn-outline" style="border:1px solid var(--primary)" onclick="showUnit('algebra')">๐ ูุญุฏุฉ ุงูุฌุจุฑ (ุงููุนุงุฏูุงุช ูุงูุฏูุงู)</button>
        <button class="btn btn-outline" style="border:1px solid var(--primary)" onclick="showUnit('geometry')">๐ ูุญุฏุฉ ุงูููุฏุณุฉ (ุงูุฏุงุฆุฑุฉ)</button>
        <button class="btn btn-outline" style="border:1px solid var(--primary)" onclick="showUnit('prob')">๐ฒ ูุญุฏุฉ ุงูุงุญุชูุงูุงุช</button>
    </div>

    <div id="screen-content" class="card hidden">
        <button class="btn btn-back" onclick="goTo('screen-units')">โฌ๏ธ ุนูุฏุฉ ูููุญุฏุงุช</button>
        <div id="unit-data" style="text-align: right;"></div>
    </div>

    <div id="screen-exam-menu" class="card hidden">
        <button class="btn btn-back" onclick="goTo('screen-main-menu')">โฌ๏ธ ุนูุฏุฉ</button>
        <h2>ุงุฎุชุฑ ููุน ุงูุงุฎุชุจุงุฑ</h2>
        <div class="grid">
            <button class="btn btn-primary" onclick="startTest('month1')">๐ ุงุฎุชุจุงุฑ ุดูุฑ ูุจุฑุงูุฑ</button>
            <button class="btn btn-primary" onclick="startTest('month2')">๐ ุงุฎุชุจุงุฑ ุดูุฑ ูุงุฑุณ</button>
            <button class="btn btn-gold" onclick="startTest('final')">๐ ุงูุชุญุงู ููุงุฆู ุดุงูู</button>
        </div>
    </div>

    <div id="screen-quiz" class="card hidden">
        <div id="quiz-header" style="display:flex; justify-content:space-between; font-weight:bold;">
            <span id="quiz-timer"></span>
            <span id="quiz-progress"></span>
        </div>
        <hr>
        <h3 id="question-text" style="min-height:80px;"></h3>
        <div id="options-container"></div>
        <div id="quiz-feedback" class="hidden" style="padding:10px; margin-top:10px; border-radius:5px;"></div>
        <button id="next-btn" class="btn btn-primary hidden" onclick="nextQuestion()">ุงูุณุคุงู ุงูุชุงูู</button>
    </div>

    <div id="screen-result" class="card hidden">
        <div class="certificate">
            <h1 style="color:var(--gold)">ุดูุงุฏุฉ ุฅูุฌุงุฒ</h1>
            <p>ูููุฏ ุจุฃู ุงูุทุงูุจ: <strong id="res-name"></strong></p>
            <p>ูุฏ ุฃููู ุจูุฌุงุญ: <strong id="res-test-type"></strong></p>
            <h2 style="color:var(--success)">ุงูุฏุฑุฌุฉ ุงูููุงุฆูุฉ: <span id="res-score"></span></h2>
            <p id="res-date"></p>
        </div>
        <button class="btn btn-primary" onclick="goTo('screen-main-menu')">ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ</button>
    </div>
</div>

<script>
    // ุจูุงูุงุช ุงููููุฌ ุงููุงููุฉ
    const curriculum = {
        algebra: {
            title: "ูุญุฏุฉ ุงูุฌุจุฑ: ุงููุนุงุฏูุงุช ูุงูุฏูุงู ุงููุณุฑูุฉ",
            lessons: [
                { t: "ุญู ูุนุงุฏูุชูู ูู ุงูุฏุฑุฌุฉ ุงูุฃููู", c: "ุฌุจุฑูุงู: ุจุงุณุชุฎุฏุงู ุงูุชุนููุถ ุฃู ุงูุญุฐู. ุจูุงููุงู: ููุทุฉ ุชูุงุทุน ุงููุณุชููููู ูู ุงูุญู. ุฅุฐุง ุชูุงุฒู ุงููุณุชูููุงูุ ูุฌููุนุฉ ุงูุญู ูุงู (โ)." },
                { t: "ุงููุงููู ุงูุนุงู ูุฏุฑุฌุฉ ุงูุซุงููุฉ", c: "ุณ = [-ุจ ยฑ โ(ุจยฒ - 4ุฃุฌ)] / 2ุฃ. ุงููููุฒ (ุจยฒ - 4ุฃุฌ) ูุญุฏุฏ ุนุฏุฏ ุงูุญููู: ููุฌุจ (ุญูุงู)ุ ุตูุฑ (ุญู ูุญูุฏ)ุ ุณุงูุจ (ูุง ููุฌุฏ ุญู ูู ุญ)." },
                { t: "ุฃุตูุงุฑ ููุฌุงู ุงูุฏุงูุฉ ุงููุณุฑูุฉ", c: "ุงููุฌุงู = ุญ - {ุฃุตูุงุฑ ุงูููุงู}. ุฃุตูุงุฑ ุงูุฏุงูุฉ ู(ุณ) = ุฃุตูุงุฑ ุงูุจุณุท - ุฃุตูุงุฑ ุงูููุงู." }
            ]
        },
        geometry: {
            title: "ูุญุฏุฉ ุงูููุฏุณุฉ: ุงูุฏุงุฆุฑุฉ",
            lessons: [
                { t: "ููุงููู ุงูุฏุงุฆุฑุฉ", c: "ูุตู ุงููุทุฑ ุนููุฏู ุนูู ุงูููุงุณ ุนูุฏ ููุทุฉ ุงูุชูุงุณ. ุฎุท ุงููุฑูุฒูู ูุฏุงุฆุฑุชูู ูุชูุงุณุชูู ููุฑ ุจููุทุฉ ุงูุชูุงุณ." },
                { t: "ุงูุฒูุงูุง ูุงูุฃููุงุณ", c: "ุงููุญูุทูุฉ = ยฝ ุงููุฑูุฒูุฉ ุงููุดุชุฑูุฉ ูุนูุง ูู ุงูููุณ. ุงููุญูุทูุฉ ุงููุฑุณููุฉ ูู ูุตู ุฏุงุฆุฑุฉ ูุงุฆูุฉ (90ยฐ)." },
                { t: "ุงูุฑุจุงุนู ุงูุฏุงุฆุฑู", c: "ูู ุฒุงููุชูู ูุชูุงุจูุชูู ูุชูุงููุชุงู (180ยฐ). ุงูุฒุงููุฉ ุงูุฎุงุฑุฌุฉ ุชุณุงูู ุงูููุงุจูุฉ ูููุฌุงูุฑุฉ ููุง." }
            ]
        }
    };

    // ุจูุงูุงุช ุงูุฃุณุฆูุฉ (ููุงุฐุฌ ุนููุฉ ุดุงููุฉ)
    const exams = {
        month1: [
            { q: "ูุฌููุนุฉ ุญู ุงููุนุงุฏูุชูู ุณ=3 ุ ุต=4 ูู:", opts: ["{(3,4)}", "{(4,3)}", "{7}", "โ"], ans: 0, hint: "ุงูุญู ูู ุงูุฒูุฌ ุงููุฑุชุจ ุณ ุฃููุงู ุซู ุต." },
            { q: "ุงููููุฒ ูููู ุณุงูุจุงู ุฅุฐุง ูุงู ุนุฏุฏ ุงูุญููู ูู ุญ ูุณุงูู:", opts: ["1", "2", "ุตูุฑ", "ุนุฏุฏ ูุง ููุงุฆู"], ans: 2, hint: "ุงููููุฒ ุงูุณุงูุจ ูุนูู ุนุฏู ูุฌูุฏ ุชูุงุทุน ูุน ูุญูุฑ ุณ." }
        ],
        final: [
            { q: "ุงูุฒุงููุฉ ุงููุญูุทูุฉ ุงููุฑุณููุฉ ูู ูุตู ุฏุงุฆุฑุฉ ุชููู:", opts: ["ุญุงุฏุฉ", "ูุงุฆูุฉ", "ูููุฑุฌุฉ", "ููุนูุณุฉ"], ans: 1, hint: "ูุธุฑูุฉ ุซุงุจุชุฉ: ููุงุณูุง ุฏุงุฆูุงู 90 ุฏุฑุฌุฉ." },
            { q: "ุงููุฌุงู ุงููุดุชุฑู ูููุณุฑูู 3/(ุณ-2) ุ 5/(ุณ+1) ูู ุญ - :", opts: ["{2}", "{-1}", "{2, -1}", "โ"], ans: 2, hint: "ุงููุฌุงู ูู ุญ ูุฑู ุฌููุน ุฃุตูุงุฑ ุงูููุงูุงุช." }
        ]
    };

    let currentTest = [];
    let testIdx = 0;
    let score = 0;

    function goTo(id) {
        if(id === 'screen-main-menu' && document.getElementById('user-name').value.length < 3) {
            alert("ูุฑุฌู ุฅุฏุฎุงู ุงูุงุณู ุงูุซูุงุซู ุฃููุงู"); return;
        }
        document.querySelectorAll('.container > div').forEach(div => div.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }

    function showUnit(unitKey) {
        const unit = curriculum[unitKey] || {title: "ูุฑูุจุงู", lessons: []};
        let html = `<h2>${unit.title}</h2>`;
        unit.lessons.forEach(l => {
            html += `<div class="lesson-box"><strong>๐ ${l.t}</strong><p>${l.c}</p></div>`;
        });
        document.getElementById('unit-data').innerHTML = html;
        goTo('screen-content');
    }

    function startTest(type) {
        currentTest = exams[type] || exams['final'];
        testIdx = 0; score = 0;
        document.getElementById('quiz-feedback').classList.add('hidden');
        goTo('screen-quiz');
        showQuestion();
    }

    function showQuestion() {
        const q = currentTest[testIdx];
        document.getElementById('question-text').innerText = q.q;
        document.getElementById('quiz-progress').innerText = `${testIdx + 1} / ${currentTest.length}`;
        const container = document.getElementById('options-container');
        container.innerHTML = "";
        q.opts.forEach((opt, i) => {
            const b = document.createElement('button');
            b.className = "btn btn-outline";
            b.style.border = "1px solid #ddd";
            b.innerText = opt;
            b.onclick = () => check(i, b);
            container.appendChild(b);
        });
        document.getElementById('next-btn').classList.add('hidden');
    }

    function check(idx, btn) {
        const q = currentTest[testIdx];
        const feed = document.getElementById('quiz-feedback');
        feed.classList.remove('hidden');
        document.querySelectorAll('#options-container button').forEach(b => b.disabled = true);
        
        if(idx === q.ans) {
            score++;
            feed.style.background = "#d4edda"; feed.innerHTML = "โ ุตุญ! " + q.hint;
            btn.style.background = "var(--success)"; btn.style.color = "white";
        } else {
            feed.style.background = "#f8d7da"; feed.innerHTML = "โ ุฎุทุฃ. " + q.hint;
            btn.style.background = "var(--danger)"; btn.style.color = "white";
        }
        document.getElementById('next-btn').classList.remove('hidden');
    }

    function nextQuestion() {
        testIdx++;
        if(testIdx < currentTest.length) {
            document.getElementById('quiz-feedback').classList.add('hidden');
            showQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        goTo('screen-result');
        document.getElementById('res-name').innerText = document.getElementById('user-name').value;
        document.getElementById('res-score').innerText = `${score} ูู ${currentTest.length}`;
        document.getElementById('res-date').innerText = new Date().toLocaleDateString('ar-EG');
    }
</script>
</body>
</html>
